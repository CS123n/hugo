<rss version="2.0">
<channel>

<item>
  <title>Homeassistant</title>
  <link>https://www.liulp.club/2021/08/homeassistant/</link>
    <description>&lt;p&gt;在Openwrt上搭建Homeassistant，目标是实现低成本可扩展的智能家居系统。&lt;/p&gt;
&lt;!--toc--&gt;
&lt;h2 id=&#34;安装hacs&#34;&gt;安装Hacs&lt;/h2&gt;
&lt;p&gt;因为Homeassistant的集成是需要审核通过的，很多开源的集成是没有加入的。所以推荐安装&lt;code&gt;Hacs&lt;/code&gt;，它拥有更大的集成市场。官方推荐的安装方法是直接进入容器，运行命令&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;wget -q -O - https://install.hacs.xyz | bash -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;但是我的docker内的网络并不能正确访问外网。通过分析代码发现，可以直接在Homeassistant的外部目录下运行脚本安装，从而不需要进入容器。其中，需要添加Homeassistant的目录到脚本的目录声明中&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;declare -a paths&lt;span style=&#34;color:#f92672&#34;&gt;=(&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/root/homeassistant/config&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;我的是/root/homeassistant/config。设置好后直接运行脚本。重启Homeassistant之后，就可以在集成中搜索到&lt;code&gt;Hacs&lt;/code&gt;了。这里需要注意的是，它自带的Github api有次数限制，建议直接在configuration.yaml中添加&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hacs:
    token: 自己申请的Github token
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;就可以避开这一限制了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://hacs.xyz/&#34;&gt;Hacs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/settings/tokens&#34;&gt;Github token&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;彩云天气&#34;&gt;彩云天气&lt;/h3&gt;
&lt;p&gt;我使用&lt;code&gt;Hacs&lt;/code&gt;添加了彩云天气的集成，彩云天气的api我早有申请，这次就直接用上了。彩云天气可以方便地根据经纬度坐标添加多地的天气预报，很符合我这种异地上学的人的需求。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dashboard.caiyunapp.com/user/sign_in/&#34;&gt;彩云天气&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;小米云服务&#34;&gt;小米云服务&lt;/h3&gt;
&lt;p&gt;在&lt;code&gt;Hacs&lt;/code&gt;的集成中，我还找到了一个有意思的小米云服务，小米手机开启手机找回功能后，就可以通过集成这个服务，来定位手机，可以说非常的方便，也免去了很多Homeassistant实现相同功能需要的权限申请。&lt;/p&gt;
&lt;h3 id=&#34;百度地图&#34;&gt;百度地图&lt;/h3&gt;
&lt;p&gt;虽然Homeassistant自带了地图组件，但是在国内地图信息实在是令人不敢恭维。所以，有人设计了使用百度地图替代官方地图的集成，这一集成我并没有在&lt;code&gt;Hacs&lt;/code&gt;中找到，建议直接从Github上下载安装到custom_components目录下。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/shaonianzhentan/ha_baidu_map&#34;&gt;ha_baidu_map&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;添加mqtt&#34;&gt;添加MQTT&lt;/h2&gt;
&lt;p&gt;通过之前已经通过docker安装了MQTT服务器，我们直接在Homeassistant集成中添加MQTT服务，并输入对应的ip地址和端口，因为是内网服务，所以我就没有设置账户密码，直接留空。&lt;/p&gt;
&lt;h2 id=&#34;编写nodemcu程序&#34;&gt;编写Nodemcu程序&lt;/h2&gt;
&lt;p&gt;有了MQTT服务以后，就可以通过MQTT添加Nodemcu等esp8266开发板，实现低成本的智能家居方案。&lt;/p&gt;
&lt;h3 id=&#34;温湿度计&#34;&gt;温湿度计&lt;/h3&gt;
&lt;p&gt;我首先在一个Nodemcu开发板上连上了一个SHTC3温湿度传感器，效果如下。然后编写了代码，烧录入Nodemcu，完整代码见附录&lt;a href=&#34;#%E6%B8%A9%E6%B9%BF%E5%BA%A6%E8%AE%A1%E4%BB%A3%E7%A0%81&#34;&gt;1&lt;/a&gt;。&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
    &lt;img src=&#34;https://cdn.jsdelivr.net/gh/CS123n/source@master/image/20200808091550.gif&#34;
    data-original=https://cdn.jsdelivr.net/gh/CS123n/source@master/image/202108041534836.webp class=&#34;lazyload&#34; alt=&#34;未命名 刘路平的主页&#34;/&gt;
&lt;/p&gt;
&lt;h3 id=&#34;红外遥控&#34;&gt;红外遥控&lt;/h3&gt;
&lt;p&gt;另外，通过非常好用的&lt;code&gt;IRremoteESP8266&lt;/code&gt;这个库，我们可以方便地配置发射红外信号。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;通过对MQTT信号的读取和处理，实现了远程红外遥控器。具体涉及到信号的读取，将byte转化为string。&lt;/li&gt;
&lt;li&gt;红外信号的发射，通过&lt;code&gt;IRremoteESP8266&lt;/code&gt;发射对应的红外信号，我家用的是格力的空调，对应可以使用&lt;code&gt;ir_Kelvinator&lt;/code&gt;库。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;完整代码见附录&lt;a href=&#34;#%E6%A0%BC%E5%8A%9B%E9%81%A5%E6%8E%A7%E5%99%A8%E4%BB%A3%E7%A0%81&#34;&gt;2&lt;/a&gt;。&lt;/p&gt;
&lt;h2 id=&#34;路由器&#34;&gt;路由器&lt;/h2&gt;
&lt;p&gt;Homeassistant支持添加路由器监控，对于我使用的Openwrt的路由器，可以在路由器上安装luci-mod-rpc。然后在configuration.yaml添加&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;device_tracker:
    - platform: luci
        host: 172.17.0.1
        username: 
        password: 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;重启Homeassistant就可以看到路由器上的设备了。还可以通过配置known_devices.yaml文件，为对应的设备添加设备名称等等。&lt;/p&gt;
&lt;h2 id=&#34;lovelace&#34;&gt;Lovelace&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Hacs&lt;/code&gt;不仅仅有丰富的集成，还提供了很多好卡的ui元素，我比较喜欢一款叫clear的主题。启用&lt;code&gt;Hacs&lt;/code&gt;中的主题需要在configuration.yaml添加&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;frontend:
    themes: !include_dir_merge_named themes
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;另外，还可以通过 左边栏姓名 $\to$ 排序和隐藏侧边栏中的项目 来重新排列或隐藏左边栏的项目。&lt;/p&gt;
&lt;p&gt;当当当当，最终的完整效果如下&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
    &lt;img src=&#34;https://cdn.jsdelivr.net/gh/CS123n/source@master/image/20200808091550.gif&#34;
    data-original=https://cdn.jsdelivr.net/gh/CS123n/source@master/image/202108041515009.webp class=&#34;lazyload&#34; alt=&#34;未命名 刘路平的主页&#34;/&gt;
&lt;/p&gt;
&lt;h2 id=&#34;附录&#34;&gt;附录&lt;/h2&gt;
&lt;h3 id=&#34;温湿度计代码&#34;&gt;温湿度计代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;Arduino.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;SparkFun_SHTC3.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;EspMQTTClient.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#define PIN_HONG 13
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define PIN_WEN 9
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
EspMQTTClient &lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt;(
  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;RM2100&amp;#34;&lt;/span&gt;,          &lt;span style=&#34;color:#75715e&#34;&gt;// wifi名
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,                &lt;span style=&#34;color:#75715e&#34;&gt;// wifi密码
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.2.110&amp;#34;&lt;/span&gt;,   &lt;span style=&#34;color:#75715e&#34;&gt;// MQTT Broker server ip
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,                &lt;span style=&#34;color:#75715e&#34;&gt;// MQTT账户名
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,                &lt;span style=&#34;color:#75715e&#34;&gt;// MQTT密码
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mqtt01-aweoif&amp;#34;&lt;/span&gt;,   &lt;span style=&#34;color:#75715e&#34;&gt;// 设备自定义名
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;1883&lt;/span&gt;               &lt;span style=&#34;color:#75715e&#34;&gt;// MQTT端口
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;);

SHTC3 mySHTC3;
&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; RH,T;
&lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; temp[&lt;span style=&#34;color:#ae81ff&#34;&gt;128&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;empty&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;setup&lt;/span&gt;() {
  &lt;span style=&#34;color:#75715e&#34;&gt;// put your setup code here, to run once:
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  Serial.begin(&lt;span style=&#34;color:#ae81ff&#34;&gt;115200&lt;/span&gt;);

  &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt;(Serial &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; false){delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;);};
  
  mySHTC3.begin();
  pinMode(LED_BUILTIN, OUTPUT);
  digitalWrite(LED_BUILTIN, HIGH);

  client.enableDebuggingMessages(); &lt;span style=&#34;color:#75715e&#34;&gt;// Enable debugging messages sent to serial output
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  client.enableHTTPWebUpdater(); &lt;span style=&#34;color:#75715e&#34;&gt;// Enable the web updater. User and password default to values of MQTTUsername and MQTTPassword. These can be overrited with enableHTTPWebUpdater(&amp;#34;user&amp;#34;, &amp;#34;password&amp;#34;).
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  client.enableLastWillMessage(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;TestClient/lastwill&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;I am going offline&amp;#34;&lt;/span&gt;);  &lt;span style=&#34;color:#75715e&#34;&gt;// You can activate the retain flag by setting the third parameter to true
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}

&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;loop&lt;/span&gt;() {
  client.loop();
&lt;span style=&#34;color:#75715e&#34;&gt;//  温湿度传感器
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(millis()&lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;20000&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;){
    SHTC3_Status_TypeDef result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; mySHTC3.update();
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(mySHTC3.lastStatus &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; SHTC3_Status_Nominal)   &lt;span style=&#34;color:#75715e&#34;&gt;//判断SHTC3状态
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    {
      RH &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; mySHTC3.toPercent();   &lt;span style=&#34;color:#75715e&#34;&gt;//读取湿度数据                       
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;      T &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; mySHTC3.toDegC();       &lt;span style=&#34;color:#75715e&#34;&gt;//读取温度数据   
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;      Serial.print(RH);
      Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;  &amp;#34;&lt;/span&gt;);
      Serial.println(T);      
      snprintf(temp,&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%.1f&amp;#34;&lt;/span&gt;,T);
      client.publish(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;esp8266/temp&amp;#34;&lt;/span&gt;,temp);
      snprintf(temp,&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%.1f&amp;#34;&lt;/span&gt;,RH);
      client.publish(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;esp8266/hum&amp;#34;&lt;/span&gt;,temp);           
    }&lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;{
      Serial.println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Update failed!&amp;#34;&lt;/span&gt;);
    }
  }
  delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;格力遥控器代码&#34;&gt;格力遥控器代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-c++&#34; data-lang=&#34;c++&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;Arduino.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;IRremoteESP8266.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;IRsend.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;ir_Kelvinator.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;ESP8266WiFi.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;PubSubClient.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; kIrLed &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;// ESP8266 GPIO pin to use. Recommended: 4 (D2).
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;IRKelvinatorAC &lt;span style=&#34;color:#a6e22e&#34;&gt;ac&lt;/span&gt;(kIrLed);  &lt;span style=&#34;color:#75715e&#34;&gt;// Set the GPIO to be used for sending messages.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// WiFi
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;ssid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;      &lt;span style=&#34;color:#75715e&#34;&gt;// Enter your WiFi name
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;password &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;// Enter WiFi password
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// MQTT Broker
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;mqtt_broker &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;192.168.2.110&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;mqtt_username &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;mqtt_password &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; client_id &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;clientId-gfdsgr&amp;#34;&lt;/span&gt;;  
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; mqtt_port &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1883&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;topic0 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;esp8266/setopen&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;topic1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;esp8266/setmod&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;topic2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;esp8266/settemp&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;topic3 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;esp8266/setfan&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;topic4 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;esp8266/setvert&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;topic5 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;esp8266/sethori&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; setopen[&lt;span style=&#34;color:#ae81ff&#34;&gt;128&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;uint8_t&lt;/span&gt; setmod &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; kKelvinatorCool;
&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; settemp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; setfan &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;

WiFiClient espClient;
PubSubClient &lt;span style=&#34;color:#a6e22e&#34;&gt;client&lt;/span&gt;(espClient);

&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;setup&lt;/span&gt;() {
  Serial.begin(&lt;span style=&#34;color:#ae81ff&#34;&gt;115200&lt;/span&gt;);
  ac.begin();
  delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;);
  
  WiFi.begin(ssid, password);
  &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (WiFi.status() &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; WL_CONNECTED) {
      delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;);
      Serial.println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Connecting to WiFi..&amp;#34;&lt;/span&gt;);
  }
  Serial.println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Connected to the WiFi network&amp;#34;&lt;/span&gt;);
  &lt;span style=&#34;color:#75715e&#34;&gt;//connecting to a mqtt broker
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  client.setServer(mqtt_broker, mqtt_port);
  client.setCallback(callback);

  &lt;span style=&#34;color:#75715e&#34;&gt;// Set up what we want to send. See ir_Kelvinator.cpp for all the options.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// Most things default to off.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  ac.off();
  ac.setFan(setfan);
  ac.setMode(kKelvinatorCool);
  ac.setTemp(settemp);
  ac.setSwingVertical(true);
  ac.setSwingHorizontal(true);
  printState();
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;callback&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; topic, byte&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; payload, &lt;span style=&#34;color:#66d9ef&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; length) {
 
  Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Message arrived in topic: &amp;#34;&lt;/span&gt;);
  Serial.println(topic);
 
  Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Message:&amp;#34;&lt;/span&gt;);
&lt;span style=&#34;color:#75715e&#34;&gt;//  for (int i = 0; i &amp;lt; length; i++) {
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//    Serial.print((char)payload[i]);
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;//  }
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;message &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;)payload;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (length &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;) {
    length &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;;
  };
  &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt; dest[length] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;;
  strncpy(dest, message, length);
  Serial.println(dest);

  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(topic, topic3) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
    setfan &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; atoi(dest);
    ac.setFan(setfan);
    printState();
  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(topic, topic2) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
    settemp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; atoi(dest);
    ac.setTemp(settemp);
    printState();
  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(topic, topic1) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hea&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      ac.setMode(kKelvinatorHeat);
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;coo&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
      ac.setMode(kKelvinatorCool);
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dry&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
      ac.setMode(kKelvinatorDry);
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;aut&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
      ac.setMode(kKelvinatorAuto);
    }
    printState();
  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(topic, topic0) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
    &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; flag &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
      ac.on();
      flag &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      ac.off();
      flag &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
    }
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (flag &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) {
      printState();
      ac.send();
      delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;);
      ac.send();
      delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;);
      ac.send();
      delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;);
      ac.send();
      delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;);
      ac.send();
      ac.off();
    };
  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(topic, topic4) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      ac.setSwingVertical(true);
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      ac.setSwingVertical(false);
    };
  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(topic, topic5) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;on&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      ac.setSwingHorizontal(true);
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (strcmp(dest, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      ac.setSwingHorizontal(false);
    };
  };
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;reconnect&lt;/span&gt;() {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;client.connected()) {
    Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Attempting MQTT connection...&amp;#34;&lt;/span&gt;);
    &lt;span style=&#34;color:#75715e&#34;&gt;// Attempt to connect
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (client.connect(client_id, mqtt_username, mqtt_password)) {
      Serial.println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;connected&amp;#34;&lt;/span&gt;);
      &lt;span style=&#34;color:#75715e&#34;&gt;// 连接成功时订阅主题
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;      client.subscribe(topic0);
      client.subscribe(topic1);
      client.subscribe(topic2);
      client.subscribe(topic3);
      client.subscribe(topic4);
      client.subscribe(topic5);
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
      Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;failed, rc=&amp;#34;&lt;/span&gt;);
      Serial.print(client.state());
      Serial.println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; try again in 5 seconds&amp;#34;&lt;/span&gt;);
      &lt;span style=&#34;color:#75715e&#34;&gt;// Wait 5 seconds before retrying
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;      delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;5000&lt;/span&gt;);
    }
  }
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;printState&lt;/span&gt;() {
  &lt;span style=&#34;color:#75715e&#34;&gt;// Display the settings.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  Serial.println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Kelvinator A/C remote is in the following state:&amp;#34;&lt;/span&gt;);
  Serial.printf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;  %s&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\n&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;, ac.toString().c_str());
  &lt;span style=&#34;color:#75715e&#34;&gt;// Display the encoded IR sequence.
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;char&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; ir_code &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ac.getRaw();
  Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;IR Code: 0x&amp;#34;&lt;/span&gt;);
  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint8_t&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; kKelvinatorStateLength; i&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;)
    Serial.printf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%02X&amp;#34;&lt;/span&gt;, ir_code[i]);
  Serial.println();
}

&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;loop&lt;/span&gt;() {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;client.connected()) {
    reconnect();
  }
  client.loop();
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
  <pubDate>Tue, 03 Aug 2021 19:25:15 +0800</pubDate>
  
  <guid>https://www.liulp.club/2021/08/homeassistant/</guid>
</item>

<item>
  <title>Docker配置</title>
  <link>https://www.liulp.club/2021/08/docker/</link>
    <description>&lt;p&gt;Openwrt中有使用docker的需求，顺道学习一下docker的配置。&lt;/p&gt;
&lt;h2 id=&#34;空间挂载&#34;&gt;空间挂载&lt;/h2&gt;
&lt;p&gt;openwrt默认是/opt和/overlay共用空间，因为文件格式等问题，docker在这种情况下只能使用vfs储存模式，占用空间大且速度慢。为此，在openwrt中分别为overlay和docker的opt分别分配空间并格式化为ext4格式，然后把/overlay和/opt分别挂载在上面，这样docker就会自动使用更好更快的overlay2储存模式。&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
    &lt;img src=&#34;https://cdn.jsdelivr.net/gh/CS123n/source@master/image/20200808091550.gif&#34;
    data-original=https://cdn.jsdelivr.net/gh/CS123n/source@master/image/202108032101457.webp class=&#34;lazyload&#34; alt=&#34;未命名 刘路平的主页&#34;/&gt;
&lt;/p&gt;
&lt;p&gt;另外，我还将一块移动硬盘挂载在/mnt/share，而且将它通过&lt;code&gt;Samba&lt;/code&gt;进行网络共享，共享下局域网传文件速度还是很可观的。&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
    &lt;img src=&#34;https://cdn.jsdelivr.net/gh/CS123n/source@master/image/20200808091550.gif&#34;
    data-original=https://cdn.jsdelivr.net/gh/CS123n/source@master/image/202108032044324.webp class=&#34;lazyload&#34; alt=&#34;未命名 刘路平的主页&#34;/&gt;
&lt;/p&gt;
&lt;h2 id=&#34;homeassistant&#34;&gt;Homeassistant&lt;/h2&gt;
&lt;p&gt;首先是使用docker在openwrt中安装&lt;code&gt;Homeassistant&lt;/code&gt;，这样就可以本地搭建智能家居服务器。&lt;code&gt;Homeassistant&lt;/code&gt;使用&lt;code&gt;MQTT&lt;/code&gt;协议的通信服务，所以还搭建了一个基于&lt;code&gt;MQTT&lt;/code&gt;的开源服务器&lt;code&gt;Eclipse Mosquitto&lt;/code&gt;的docker。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.home-assistant.io/&#34;&gt;Homeassistant&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/MQTT&#34;&gt;MQTT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://mosquitto.org/&#34;&gt;Eclipse Mosquitto&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mqtt&#34;&gt;MQTT&lt;/h3&gt;
&lt;p&gt;首先设置配置文件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;mkdir -p /mosquitto/config
mkdir -p /mosquitto/data
mkdir -p /mosquitto/log
nano /mosquitto/config/mosquitto.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;并在mosquitto.conf中添加&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;persistence true
persistence_location /mosquitto/data
log_dest file /mosquitto/log/mosquitto.log
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;如果需要使用密码，因为我只在局域网提供服务，就没有添加用户名密码。在mosquitto.conf中添加&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;allow_anonymous false
password_file /mosquitto/pwfile
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;然后在容器启动后运行命令，添加用户admin以及密码&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;mosquitto_passwd -c /mosquitto/pwfile admin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;并授予目录权限&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;chmod -R &lt;span style=&#34;color:#ae81ff&#34;&gt;755&lt;/span&gt; /mosquitto
chmode -R &lt;span style=&#34;color:#ae81ff&#34;&gt;777&lt;/span&gt; /mosquitto/log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;完成以上准备后，启动容器&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;docker run -d --name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mosquitto&amp;#34;&lt;/span&gt; --net&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;host &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    -v /mosquitto/config/mosquitto.conf:/mosquitto/config/mosquitto.conf &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    -v /mosquitto/data:/mosquitto/data &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    -v /mosquitto/log:/mosquitto/log &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    eclipse-mosquitto:1.6.14
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;要注意的是，一是最新版本的Eclipse Mosquitto 2无法被正常访问，所以建议使用1.6.14版本。二是在openwrt中的桥接模式，端口映射后被其他终端直接访问有问题，建议直接使用host模式，共享网络。&lt;/p&gt;
&lt;h3 id=&#34;homeassistant-1&#34;&gt;Homeassistant&lt;/h3&gt;
&lt;p&gt;接下来运行Homeassistant&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;docker run -d --name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;home-assistants&amp;#34;&lt;/span&gt; -p 8123:8123 &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    -v /root/homeassistant/config:/config &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    -v /mnt/share:/mnt/share &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    homeassistant/home-assistant
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;除了将配置文件进行映射，我还将我的分享目录进行了映射，这样就可以通过&lt;code&gt;Homeassistant&lt;/code&gt;直接访问分享目录下的影视资源。&lt;/p&gt;
&lt;h2 id=&#34;nginxphp&#34;&gt;Nginx+PHP&lt;/h2&gt;
&lt;p&gt;为了为局域网添加Speedtest。刚开始打算直接添加Speedtest的docker，可惜出现了架构不兼容的问题&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;WARNING: The requested image&#39;s platform (linux/amd64) does not match the detected host platform (linux/arm64/v8) and no specific platform was requested
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;为此，我决定曲线救国，使用docker搭建web服务器。开始打算使用集成好的docker镜像，最后还是决定使用docker-compose的方案。分别安装nginx和php的官方docker镜像，这两个镜像都没有架构兼容性问题。&lt;/p&gt;
&lt;p&gt;首先安装php&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;docker run -d --name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;web-php&amp;#34;&lt;/span&gt; -p 9000:9000 &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    -v /root/nginx/webroot:/usr/share/nginx/html &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    php:7.2-fpm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;其次添加nginx的配置文件conf.d&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name localhost;

    index index.php index.html;
    error_log  /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;
    root /var/www/html;

    set $virtualdir &amp;quot;&amp;quot;;
    set $realdir &amp;quot;&amp;quot;;

    if ($request_uri ~ ^/([^/]*)/.*$ ) {
        set $virtualdir /$1;
    }

    if (-d &amp;quot;$document_root$virtualdir&amp;quot;) {
        set $realdir &amp;quot;${virtualdir}&amp;quot;;
    }

    location / {
        try_files $uri $uri/ $realdir/index.php?$args;
    }
    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass 192.168.2.110:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;其中，文件路径为/root/nginx/webroot。并且将&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;fastcgi_pass 192.168.2.110:9000;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;中的地址修改为php的运行位置。建议不要用桥接的地址，因为我发现每次重启后，桥接地址是可能发生变换的，建议端口映射后，直接使用局域网地址。&lt;/p&gt;
&lt;p&gt;然后运行nginx&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;docker run -d --name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;web-nginx&amp;#34;&lt;/span&gt; -p 8088:80 &lt;span style=&#34;color:#ae81ff&#34;&gt;\&lt;/span&gt;
    -v /root/nginx/conf.d:/etc/nginx/conf.d
    -v /root/nginx/webroot:/usr/share/nginx/html
    nginx:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;有个问题是，8080端口不能正常使用，建议使用自定义端口，譬如我用的8088端口。&lt;/p&gt;
&lt;h3 id=&#34;speedtest&#34;&gt;Speedtest&lt;/h3&gt;
&lt;p&gt;成功运行后，在文件目录，我的是/root/nginx/webroot，添加Speedtest的网站文件。并将example-singleServer-full.html重命名为默认文件index.html。然后就可以直接访问对应的网址测速了，我的是&lt;a href=&#34;http://192.168.2.110:8088/speedtest/&#34;&gt;192.168.2.110:8088/speedtest/&lt;/a&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/librespeed/speedtest&#34;&gt;Speedtest&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;当当当当，最终的测速效果如下&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
    &lt;img src=&#34;https://cdn.jsdelivr.net/gh/CS123n/source@master/image/20200808091550.gif&#34;
    data-original=https://cdn.jsdelivr.net/gh/CS123n/source@master/image/202108032017072.webp class=&#34;lazyload&#34; alt=&#34;未命名 刘路平的主页&#34;/&gt;
&lt;/p&gt;</description>
  <pubDate>Tue, 03 Aug 2021 17:46:55 +0800</pubDate>
  
  <guid>https://www.liulp.club/2021/08/docker/</guid>
</item>

<item>
  <title>Openwrt搭建</title>
  <link>https://www.liulp.club/2021/08/openwrt_init/</link>
    <description>&lt;p&gt;心心念念了好久，暑假回家终于用屯的二手树莓派搭建起了Openwrt的软路由。&lt;/p&gt;
&lt;!--toc--&gt;
&lt;h2 id=&#34;镜像安装&#34;&gt;镜像安装&lt;/h2&gt;
&lt;p&gt;因为使用的是树莓派4b，网上有现成的为树莓派4b编译的镜像&lt;code&gt;OpenWrt-Rpi&lt;/code&gt;，而且每天基于Github Action自动更新。然后将下好的镜像使用&lt;code&gt;balenaEtcher&lt;/code&gt;烧录到SD卡内插入到树莓派中。有意思的是，重新烧录同样的镜像，树莓派是不会重新加载的，所以每次我重写镜像都需要换个镜像刷写，再刷回来以进行重置。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/SuLingGG/OpenWrt-Rpi&#34;&gt;OpenWrt-Rpi&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.balena.io/etcher/&#34;&gt;balenaEtcher&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;网络设置&#34;&gt;网络设置&lt;/h2&gt;
&lt;p&gt;因为是用树莓派做旁路由，所以需要对于网络进行一定的设置。主要是在主路由上设置网关和DNS服务器地址指向旁路由。在树莓派上修改ip地址到主路由的网段，并将网关改为主路由的ip地址。具体到我，我设定树莓派向外提供服务，譬如将默认DNS服务器指向旁路由，由旁路由运行Adguard Home提供DNS服务，进行广告过滤。但是并没有设置主路由网关指向旁路由，也就没有默认所有流量经过旁路由。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://adguard.com/&#34;&gt;Adguard Home&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;网络拓扑&#34;&gt;网络拓扑&lt;/h3&gt;
&lt;p&gt;刷机成功后，连上树莓派的默认Wifi。首先要将旁路由的ip地址改到主路由网段：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;uci set network.lan.ipaddr&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;192.168.2.110
uci commit network
/etc/init.d/network restart
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后就可以将树莓派插到主路由的LAN口上了，并通过刚刚设置的ip，对于我就是192.168.2.110，直接访问了。整个网络拓扑如下&lt;/p&gt;
&lt;p align=&#34;center&#34;&gt;
    &lt;img src=&#34;https://cdn.jsdelivr.net/gh/CS123n/source@master/image/20200808091550.gif&#34;
    data-original=https://cdn.jsdelivr.net/gh/CS123n/source@master/image/202108032051849.webp class=&#34;lazyload&#34; alt=&#34;未命名 刘路平的主页&#34;/&gt;
&lt;/p&gt;
&lt;h3 id=&#34;dns服务配置&#34;&gt;DNS服务配置&lt;/h3&gt;
&lt;p&gt;由于我主路由本来运行着&lt;code&gt;SmartDNS&lt;/code&gt;，我关闭了主路由的DNS服务，从主路由将DNS服务器直接设置为树莓派的ip。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/pymumu/smartdns&#34;&gt;SmartDNS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p align=&#34;center&#34;&gt;
    &lt;img src=&#34;https://cdn.jsdelivr.net/gh/CS123n/source@master/image/20200808091550.gif&#34;
    data-original=https://cdn.jsdelivr.net/gh/CS123n/source@master/image/202108031647152.webp class=&#34;lazyload&#34; alt=&#34;未命名 刘路平的主页&#34;/&gt;
&lt;/p&gt;
&lt;p&gt;这里遇到的一个坑是，本来计划直接让Adguard Home接管53端口，但是出现了梯子用不了等网络的问题。最后还是选用将Adguard Home作为dnsmasq的上游服务器，可能这样其他服务也可以正常设置DNS服务，如修改dnsmasq配置。&lt;/p&gt;
&lt;p&gt;因为我家光猫不支持ipv6，所以我在旁路由DHCP/DNS和Adguard Home中分别禁止了ipv6解析，以便快速返回解析结果。&lt;/p&gt;
&lt;h3 id=&#34;自定义域名&#34;&gt;自定义域名&lt;/h3&gt;
&lt;p&gt;Adguard Home不仅仅可以用于拦截广告。可以通过Adguard Home自定义拦截规则，来设置自定义域名，譬如设置&lt;a href=&#34;http://mywifi.org&#34;&gt;mywifi.org&lt;/a&gt;指向192.168.2.110，条目如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;192.168.2.110 mywifi.org
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这里有一点，Openwrt会拦截指向内网的解析，需要关掉网络 $\to$ DHCP/DNS $\to$ 基本设置的重定向保护，解析才能生效。&lt;/p&gt;
&lt;h2 id=&#34;内网穿透&#34;&gt;内网穿透&lt;/h2&gt;
&lt;p&gt;因为有公网服务器，所以想把家里的局域网和公网服务器组网进行内网穿透。我使用的是&lt;code&gt;zerotier&lt;/code&gt;这款开源软件。这款软件一定条件下可以实现点对点通信，突破公网服务器做内网穿透的带宽限制。因为zerotier的节点服务器都在国外，我在公网服务器上搭建了中转通信的moon服务器，加速访问。我还发现了一款好的&lt;code&gt;zerotier&lt;/code&gt;第三方安卓客户端&lt;code&gt;ZerotierFix&lt;/code&gt;，可以在安卓端方便地添加moon节点。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://my.zerotier.com/&#34;&gt;zerotier&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://imcm.xyz/linux-zerotier-moon/&#34;&gt;zerotier moon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/kaaass/ZerotierFix&#34;&gt;ZerotierFix&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体的整个zerotier的配置流程，强烈推荐b站up主“韩风Talk”的讲解视频&lt;/p&gt;
&lt;div style=&#34;position: relative;&#34;&gt;
    &lt;iframe class=&#34;biiframe&#34; width= &#39;100%&#39; height=&#39;400&#39;
    src=&#34;//player.bilibili.com/player.html?bvid=BV1hT4y1E78k&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&#34; scrolling=&#34;no&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;</description>
  <pubDate>Tue, 03 Aug 2021 15:51:03 +0800</pubDate>
  
  <guid>https://www.liulp.club/2021/08/openwrt_init/</guid>
</item>

<item>
  <title>网站跨域设计</title>
  <link>https://www.liulp.club/2021/01/cors/</link>
    <description>&lt;p&gt;花了小两天时间彻底实现了一下&lt;code&gt;teambition&lt;/code&gt;直链的跨域问题，值得写下来纪念一下。&lt;/p&gt;
&lt;!--toc--&gt;
&lt;h2 id=&#34;teambition&#34;&gt;Teambition&lt;/h2&gt;
&lt;p&gt;目前找到了两个&lt;code&gt;teambition&lt;/code&gt;的直链系统，一个是用&lt;code&gt;Node.js&lt;/code&gt;写的，另一个是用&lt;code&gt;php&lt;/code&gt;写的。&lt;code&gt;Node.js&lt;/code&gt;写的我不会改，就修改了&lt;code&gt;php&lt;/code&gt;版本的，成功实现了自己的想法，哈哈哈，开心~~&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.52pojie.cn/thread-1320716-1-1.html&#34;&gt;teambition直链解析&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/FlxSNX/TeambitionShare&#34;&gt;TeambitionShare&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;应为直链解析直接解析到&lt;code&gt;teambition&lt;/code&gt;的服务器，本意是为了不用走服务器流量。但是在网页调用时会出现跨域的问题，我就修改了链接格式使用了反向代理。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;// index.php
$cors1 = &amp;#34;https://teambition.ltest.tk/service&amp;#34;;
$cors2 = substr($result[&amp;#39;downloadUrl&amp;#39;], 34);
$result[&amp;#39;downloadUrl&amp;#39;] = &amp;#34;$cors1$cors2&amp;#34;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;teambitionshare&#34;&gt;TeambitionShare&lt;/h2&gt;
&lt;p&gt;支持添加尾缀,直接链接访问文件不验证密码和&lt;code&gt;wehp&lt;/code&gt;预览&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;// flx.php
if(strpos($s,&amp;#39;.&amp;#39;) !== false){ 
  $temp = explode(&amp;#39;.&amp;#39;, $s);
  $s = $temp[0];
}

// index.php
if(substr($_SERVER[&amp;#39;REQUEST_URI&amp;#39;],0,9) != &amp;#39;/download&amp;#39;){……}

//function.php
if($type == &amp;#39;mp4&amp;#39; || in_array($type,[&amp;#34;gif&amp;#34;,&amp;#34;jpeg&amp;#34;,&amp;#34;jpg&amp;#34;,&amp;#34;png&amp;#34;,&amp;#34;webp&amp;#34;]) || in_array($type,[&amp;#34;mp3&amp;#34;,&amp;#34;ogg&amp;#34;,&amp;#34;wav&amp;#34;])){
  return &amp;#39;?preview&amp;#39;;
}

//_preview.html
&lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;?php&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;elseif&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;in_array&lt;/span&gt;($filetype,[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;gif&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jpeg&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jpg&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;png&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;webp&amp;#34;&lt;/span&gt;])){ 
  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;img&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mdui-center&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;?=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;$downloadUrl&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;?&amp;gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;max-width: 100%;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
} &lt;span style=&#34;color:#75715e&#34;&gt;?&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;nignx目录分流&#34;&gt;Nignx目录分流&lt;/h2&gt;
&lt;p&gt;本来&lt;code&gt;teambition&lt;/code&gt;解析和反向代理都可以分配一个域名，不过这样还是有跨域的问题。所以我学习重写了&lt;code&gt;nignx&lt;/code&gt;的配置文件，使用子目录做分流。根目录是&lt;code&gt;TeambitionShare&lt;/code&gt;，&lt;code&gt;/service&lt;/code&gt;目录用来转代&lt;code&gt;teambition&lt;/code&gt;服务器，进行反向代理，而&lt;code&gt;/pdf&lt;/code&gt;和&lt;code&gt;/epub&lt;/code&gt;用于加载&lt;code&gt;pdf&lt;/code&gt;和&lt;code&gt;epub&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;set $flag 1;
location /service/ {
  proxy_pass https://data-hz-pds.teambition.net/;
  proxy_set_header Host data-hz-pds.teambition.net;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header REMOTE-HOST $remote_addr;
  set $flag 0;
}
location /pdf {
  set $flag 0;
}
location /epub {
  set $flag 0;
}

if (!-e $request_filename){
  set $flag &amp;#34;${flag}1&amp;#34;;
}
#根目录伪静态
location / {
  if ($flag = 11){
    rewrite ^(.*)$ /index.php/?s=$1;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;epubjs调整&#34;&gt;Epubjs调整&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;epubjs&lt;/code&gt;支持以文件名为结尾的网址，为了和&lt;code&gt;TeambitionShare&lt;/code&gt;生成的目录相容。先网页默认添加&lt;code&gt;index.epub&lt;/code&gt;的尾缀，然后在&lt;code&gt;javascript&lt;/code&gt;中再删除。简单得实现了兼容。我真是一个小天才，哈哈。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-javascript&#34; data-lang=&#34;javascript&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// epub.js
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;xhr&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;onreadystatechange&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;;
&lt;span style=&#34;color:#a6e22e&#34;&gt;url&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;url&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;slice&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;);
&lt;span style=&#34;color:#a6e22e&#34;&gt;xhr&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;open&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;url&lt;/span&gt;);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;效果&#34;&gt;效果&lt;/h2&gt;
&lt;p&gt;当当当，展示一下效果。当然走的海外的服务器，延迟稍微有点高。&lt;/p&gt;
&lt;iframe class=&#34;pdfiframe&#34; width=&#34;100%&#34; height=&#34;100%&#34; frameborder=&#34;0&#34;
    src=&#34;https://alist.liulp.club/pdf/web/viewer.html?file=https://alist.liulp.club/d/Alidrive/Website/document/Terence_Tao_Analysis_I.pdf&#34; &gt;
&lt;/iframe&gt;</description>
  <pubDate>Sun, 10 Jan 2021 23:02:38 +0800</pubDate>
  
  <guid>https://www.liulp.club/2021/01/cors/</guid>
</item>

<item>
  <title>远程下载视频成m3u8形式</title>
  <link>https://www.liulp.club/2020/08/m3u8/</link>
    <description>&lt;p&gt;成功使用远程下载自动切片m3u8，且实现在线播放。&lt;/p&gt;
&lt;h2 id=&#34;技术博客&#34;&gt;技术博客&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jianshu.com/p/273bdb4c240b&#34;&gt;mp4切片m3u8&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://ffmpeg.org/&#34;&gt;ffmpeg&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.moerats.com/archives/482/&#34;&gt;aria2远程下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.moerats.com/archives/1006/&#34;&gt;远程上传到onedrive&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/boyit0/article/details/88579330&#34;&gt;video.js实现m3u8播放&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;实现过程&#34;&gt;实现过程&lt;/h2&gt;
&lt;h3 id=&#34;服务器端代码&#34;&gt;服务器端代码：&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#!/bin/bash
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
GID&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$1&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;;
FileNum&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$2&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;;
File&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$3&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;;
MinSize&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;5&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;#限制最低上传大小，默认5k&lt;/span&gt;
MaxSize&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;15728640&amp;#34;&lt;/span&gt;;
Thread&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;5&amp;#34;&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;#默认3线程，自行修改，服务器配置不好的话，不建议太多&lt;/span&gt;
Block&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;15&amp;#34;&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;#默认分块20m，自行修改&lt;/span&gt;
RemoteDIR&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cloud&amp;#34;&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;#上传到Onedrive的路径，默认为根目录，如果要上传到MOERATS目录，&amp;#34;&amp;#34;里面请填成MOERATS&lt;/span&gt;
LocalDIR&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/usr/local/caddy/www/aria2/Download&amp;#34;&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;#Aria2下载目录，记得最后面加上/&lt;/span&gt;
Uploader&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/usr/local/bin/OneDriveUploader&amp;#34;&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;#上传的程序完整路径，默认为本文安装的目录&lt;/span&gt;
Config&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/root/auth.json&amp;#34;&lt;/span&gt;;  &lt;span style=&#34;color:#75715e&#34;&gt;#初始化生成的配置auth.json绝对路径，参考第3步骤生成的路径&lt;/span&gt;


&lt;span style=&#34;color:#75715e&#34;&gt;# 调用ffmpeg&lt;/span&gt;
cd /usr/local/caddy/www/aria2/Download
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; files in &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;ls&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;# 截取文件名的前两个字符&lt;/span&gt;
    object&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;files&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;;
    fname&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;files%.*&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;# 截取文件的后四个字符&lt;/span&gt;
    bname&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;files:0-3&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;;
    &lt;span style=&#34;color:#75715e&#34;&gt;# 拼接成文件名&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; $bname &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; mp4 &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;;&lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt;
        mkdir $fname;
        ffmpeg -i $object -c copy -bsf:v h264_mp4toannexb cs.ts
        ffmpeg -i cs.ts -c copy -map &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; -f segment -segment_list ‘$fname/cs.m3u8’ -segment_time &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt; ‘$fname/cs-%03d.ts’
        rm cs.ts
    &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;done&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; -z &lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$FileNum&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; |grep -o &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;[0-9]*&amp;#39;&lt;/span&gt; |head -n1&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]]&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt; FileNum&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$FileNum&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; -le &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]]&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt; exit 0; &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$#&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; !&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;3&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]]&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt; exit 0; &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; LoadFile&lt;span style=&#34;color:#f92672&#34;&gt;(){&lt;/span&gt;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; ! -e &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;Uploader&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]]&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
  IFS_BAK&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$IFS
  IFS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;$&amp;#39;\n&amp;#39;&lt;/span&gt;
  tmpFile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;echo &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;File/#$LocalDIR&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; |cut -f1 -d&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;
  FileLoad&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;LocalDIR&lt;span style=&#34;color:#e6db74&#34;&gt;}${&lt;/span&gt;tmpFile&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; ! -e &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;FileLoad&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]]&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
  ItemSize&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;du -s &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;FileLoad&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; |cut -f1 |grep -o &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;[0-9]*&amp;#39;&lt;/span&gt; |head -n1&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; -z &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$ItemSize&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]]&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$ItemSize&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; -ge &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$MaxSize&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]]&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt;
    echo -ne &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\033[33m&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;FileLoad&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; \033[0mtoo large to spik.\n&amp;#34;&lt;/span&gt;;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
  &lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;Uploader&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt; -c &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;Config&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; -t &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;Thread&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; -b &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;Block&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; -s &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;FileLoad&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; -r &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;RemoteDIR&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; -skip
  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[[&lt;/span&gt; $? &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;0&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]]&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt;
    rm -rf &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;FileLoad&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;
  IFS&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$IFS_BAK
&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt;
LoadFile;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;前端代码&#34;&gt;前端代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;m3u8iframe&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://www.liulp.club/m3u8/index.html?url=https://drive.liulp.club/Download/{{.Get 0 }}/cs.m3u8&amp;#34;&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;width&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100%&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;height&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;600&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allowfullscreen&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;frameborder&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;scrolling&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;no&amp;#39;&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;效果&#34;&gt;效果&lt;/h2&gt;
&lt;!-- &lt;iframe id=&#34;m3u8iframe&#34;  src=&#34;https://www.liulp.club/m3u8/index.html?url=//cdn.jsdelivr.net/gh/CS123n/source@master/video/You_Belong_with_Me/cs.m3u8&#34;
    width=&#34;100%&#34; height=&#34;600&#34; allowfullscreen=&#34;true&#34; frameborder=&#34;0&#34; scrolling=&#39;no&#39;&gt;
&lt;/iframe&gt; --&gt;
&lt;ul&gt;
&lt;li&gt;You Belong with Me&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;iframe class=&#34;videoiframe&#34; width= &#39;100%&#39; height=&#39;400&#39; scrolling=&#34;no&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34; 
    src=&#34;https://alist.liulp.club/video/?You_Belong_with_Me&amp;m3u8&#34;&gt;
&lt;/iframe&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;黑神话悟空&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;iframe class=&#34;videoiframe&#34; width= &#39;100%&#39; height=&#39;400&#39; scrolling=&#34;no&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34; 
    src=&#34;https://alist.liulp.club/video/?%e9%bb%91%e7%a5%9e%e8%af%9d%e6%82%9f%e7%a9%ba&amp;m3u8&#34;&gt;
&lt;/iframe&gt;&lt;/p&gt;</description>
  <pubDate>Tue, 18 Aug 2020 19:17:28 +0800</pubDate>
  
  <guid>https://www.liulp.club/2020/08/m3u8/</guid>
</item>

<item>
  <title>服务器配置相关</title>
  <link>https://www.liulp.club/2020/08/baota/</link>
    <description>&lt;p&gt;阿里云服务器启用宝塔面板，配合静态和php搭建各种网站。&lt;/p&gt;
&lt;p&gt;本文记录我在阿里云和vultr的两台服务器的各种操作，这也是我独门的减压的方法吧。都挺好，就是越弄时间越少，压力越大啊。一直摸鱼可不会一直爽，咳咳。&lt;/p&gt;
&lt;h2 id=&#34;我的网站&#34;&gt;我的网站&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;del&gt;&lt;a href=&#34;https://vultr.liulp.club&#34;&gt;PyOne&lt;/a&gt;&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://analytic.liulp.club&#34;&gt;Matomo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://aria.liulp.club&#34;&gt;Aria2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://short.liulp.club/&#34;&gt;Shlink&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;API:f98138fa-6afb-4d7e-9245-749e0787495d &lt;i class=&#34;fa fa-copy&#34; id=&#39;copyto&#39; onclick=&#34;copyapi()&#34; title=&#34;复制API到剪贴板&#34;&gt;&lt;/i&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;del&gt;&lt;a href=&#34;https://wekan.liulp.club/&#34;&gt;wekan&lt;/a&gt;&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://next.liulp.club/&#34;&gt;Nextcloud&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://drive.liulp.club/&#34;&gt;Onemanager&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;del&gt;&lt;a href=&#34;https://img.liulp.club/&#34;&gt;Chevereto&lt;/a&gt;&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://baota.liulp.club&#34;&gt;宝塔面板&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;当然，我是不会告诉你怎么进入我的后台的，哈哈&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;技术博客&#34;&gt;技术博客&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://developer.aliyun.com/ask/233242?spm=a2c6h.13524658&#34;&gt;宝塔初始化&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.cnblogs.com/gelandesprung/p/12019157.html&#34;&gt;Docker文件操作&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;del&gt;&lt;a href=&#34;https://www.daniao.org/7523.html&#34;&gt;安装Matomo&lt;/a&gt;&lt;/del&gt;
&lt;ul&gt;
&lt;li&gt;对于依赖版本要求非常准确，对最新版适配欠缺&lt;/li&gt;
&lt;li&gt;需要进如Docker内部开启https&lt;/li&gt;
&lt;li&gt;不支持默认中文目录&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://matomo.org/docs/installation/#start-the-installation&#34;&gt;安装官方matomo&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;官方的真的简洁又好用！！！还能正常连接数据库！！！&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.moerats.com/archives/799/&#34;&gt;安装PyOne&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Docker版是阉割版&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.moerats.com/archives/806/&#34;&gt;一键安装脚本&lt;/a&gt;非常好用，建议可以弄单独的服务器运行&lt;/li&gt;
&lt;li&gt;Caddy运行失败，使用&lt;a href=&#34;https://www.moerats.com/archives/409/&#34;&gt;Caddy安装脚本&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.moerats.com/archives/750/&#34;&gt;安装Aria2&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;配合图形界面和上传工具使用更佳&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;del&gt;&lt;a href=&#34;https://www.moerats.com/archives/956/&#34;&gt;安装lstu短链&lt;/a&gt;&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://shlink.io/documentation/&#34;&gt;安装shlink短链&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;直接使用Docker安装，官方配套web控制台&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.azimiao.com/5503.html&#34;&gt;安装wekan看板&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;穿透要挂到内网里，使用公网ip就是普通转代了……&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://nextcloud.com/install/#&#34;&gt;安装Nextcloud&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;用心的&lt;a href=&#34;https://www.jianshu.com/p/4fd537c80d87&#34;&gt;配置优化&lt;/a&gt;教程&lt;/li&gt;
&lt;li&gt;Owncloud安卓端居然收费，直接用Nextcloud&lt;/li&gt;
&lt;li&gt;Nextcloud的插件好动心啊，可惜加载太慢，存在问题&lt;/li&gt;
&lt;li&gt;Nextcloud还支持webdav，一直想用，可惜国内支持的软件有限&lt;/li&gt;
&lt;li&gt;Nextcloud的插件生态简直了，都是什么神仙配置！！！爱了&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.moerats.com/archives/1006/&#34;&gt;Onedrive离线下载&lt;/a&gt;，无UI版
&lt;ul&gt;
&lt;li&gt;使用此插件加上&lt;a href=&#34;http://www.jsoo.cc/82019223.html&#34;&gt;aria2&lt;/a&gt;，实现离线下载&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.liuxinggang.com/archives/gethook_hexo_vps.html&#34;&gt;博客服务器自动部署&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;script&gt;
    function copyapi(){
        var clipBoardContent=&#34;78e166d6-7fcb-4ac5-b1a2-57e992a1bc28&#34;;
        if(window.clipboardData){
            window.clipboardData.setData(&#39;text&#39;,clipBoardContent);
        }else{
            (function(clipBoardContent){
                document.oncopy=function(e){
                    e.clipboardData.setData(&#39;text&#39;,clipBoardContent);
                    e.preventDefault();
                    document.oncopy=null;
                }
            })(clipBoardContent);
            document.execCommand(&#39;Copy&#39;);
        }
        alert(&#39;成功复制API到剪贴板&#39;);
    };
&lt;/script&gt;</description>
  <pubDate>Thu, 13 Aug 2020 10:26:36 +0800</pubDate>
  
  <guid>https://www.liulp.club/2020/08/baota/</guid>
</item>

<item>
  <title>pdf.js与iframe</title>
  <link>https://www.liulp.club/2020/08/pdf_iframe/</link>
    <description>&lt;p&gt;网站解锁iframe方案&lt;/p&gt;
&lt;p&gt;iframe，简直是扩展的first choice，各种GitHub上的轮子用起来不要太舒服，配合shortcode更佳欧！&lt;/p&gt;
&lt;h2 id=&#34;pdfjs内嵌网页&#34;&gt;pdf.js内嵌网页&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pdfiframe&amp;#34;&lt;/span&gt; 
    &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://www.liulp.club/pdf/web/viewer.html?file=https://cdn.jsdelivr.net/gh/CS123n/source@master/document/{{.Get 0 }}.pdf&amp;#34;&lt;/span&gt; 
    &lt;span style=&#34;color:#a6e22e&#34;&gt;width&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100%&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;height&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100%&amp;#34;&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;iframe class=&#34;pdfiframe&#34; width=&#34;100%&#34; height=&#34;100%&#34; frameborder=&#34;0&#34;
    src=&#34;https://alist.liulp.club/pdf/web/viewer.html?file=https://alist.liulp.club/d/Alidrive/Website/document/Terence_Tao_Analysis_I.pdf&#34; &gt;
&lt;/iframe&gt;
&lt;h2 id=&#34;epubjs内嵌网页&#34;&gt;epub.js内嵌网页&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;epubiframe&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allowfullscreen&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt; 
    &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://www.liulp.club/epub/index.html?bookPath=https://cdn.jsdelivr.net/gh/CS123n/source@master/document/{{.Get 0 }}.epub&amp;#34;&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;width&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100%&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;height&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100%&amp;#34;&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;iframe class=&#34;epubiframe&#34; width=&#34;100%&#34; height=&#34;600&#34; allowfullscreen=&#34;true&#34; frameborder=&#34;0&#34;
    src=&#34;https://alist.liulp.club/epub/reader/?bookPath=https://alist.liulp.club/d/Alidrive/Website/document/%e8%ae%ba%e7%be%8e%e5%9b%bd%e7%9a%84%e6%b0%91%e4%b8%bb.epub&#34;
&gt;&lt;/iframe&gt;

&lt;!-- ## MD5密文内嵌
```html
&lt;iframe id=&#34;md5iframe&#34;
    src=&#34;https://www.liulp.club/md5/decode.html?txt={{.Get 0 }}&#34;
    width=&#34;100%&#34; height=&#34;300&#34; frameborder=&#34;0&#34;&gt;
&lt;/iframe&gt;
```

&lt;iframe id=&#34;md5iframe&#34;
    src=&#34;https://www.liulp.club/md5/decode.html?txt=prose_a&#34;
    width=&#34;100%&#34; height=&#34;300&#34; frameborder=&#34;0&#34; &gt;
&lt;/iframe&gt; --&gt;
&lt;!-- ## pdfobject方法
此方法无法适配手机浏览器
```html
&lt;object id= &#34;pdfcontainer&#34; data=&#39;&#39; 
    type=&#39;application/pdf&#39; 
    width=&#39;100%&#39; 
    height=&#39;600px&#39;&gt;
&lt;/object&gt;
```
&lt;object id= &#34;pdfcontainer&#34; data=&#39;https://cdn.jsdelivr.net/gh/CS123n/source@master/document/Terence_Tao_Analysis_I.pdf&#39; 
    type=&#39;application/pdf&#39; 
    width=&#39;100%&#39; 
    height=&#39;600px&#39;&gt;
&lt;/object&gt;
 &lt;script&gt;
    var ele = document.getElementById(&#39;pdfcontainer&#39;);
    var he=Math.min(window.screen.availHeight*0.85, ele.offsetWidth*1.6);
    ele.height = he;
&lt;/script&gt; --&gt;&lt;blockquote&gt;
&lt;/blockquote&gt;</description>
  <pubDate>Sun, 02 Aug 2020 14:16:19 +0800</pubDate>
  
  <guid>https://www.liulp.club/2020/08/pdf_iframe/</guid>
</item>

<item>
  <title>Hugo短命令</title>
  <link>https://www.liulp.club/2020/07/hugo/</link>
    <description>&lt;p&gt;Hugo短命令实现Bilibili视频自适应屏幕啦。Hugo短命令真的强大丰富且便捷。&lt;/p&gt;
&lt;h2 id=&#34;技术站点&#34;&gt;技术站点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bestzuo.cn/posts/blog-bilbli.html&#34;&gt;自适应大小&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/u013842501/article/details/105660616/&#34;&gt;Hugo 短命令&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jianshu.com/p/94d76eced8c2&#34;&gt;video 加字幕&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://atelier.u-sub.net/srt2vtt/&#34;&gt;srt2vtt&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;视频效果&#34;&gt;视频效果&lt;/h2&gt;
&lt;div style=&#34;position: relative;&#34;&gt;
    &lt;iframe class=&#34;biiframe&#34; width= &#39;100%&#39; height=&#39;400&#39;
    src=&#34;//player.bilibili.com/player.html?bvid=BV14z411i78Q&amp;page=1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&#34; scrolling=&#34;no&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;h3 id=&#34;代码&#34;&gt;代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;position: relative; padding: 32% 45%;&amp;#34;&lt;/span&gt;&amp;gt;
    &amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;position: absolute; width: 100%; height: 100%; left: 0; top: 0;&amp;#34;&lt;/span&gt; 
    &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//player.bilibili.com/player.html?bvid={{.Get 0 }}&amp;amp;page={{ if .Get 1 }}{{.Get 1}}{{ else }}1{{end}}&amp;amp;as_wide=1&amp;amp;high_quality=1&amp;amp;danmaku=1&amp;#34;&lt;/span&gt; 
    &lt;span style=&#34;color:#a6e22e&#34;&gt;scrolling&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;no&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;frameborder&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;no&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;framespacing&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allowfullscreen&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;div&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;网盘视频&#34;&gt;网盘视频&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;video&amp;gt;&lt;/code&gt;标签支持网盘视频和字幕&lt;/li&gt;
&lt;li&gt;腾讯云开启CORS&lt;/li&gt;
&lt;li&gt;加载video.js插件&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;效果&#34;&gt;效果&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;MP4&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;iframe class=&#34;videoiframe&#34; width= &#39;100%&#39; height=&#39;400&#39; scrolling=&#34;no&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34; 
    src=&#34;https://alist.liulp.club/video/?2020%ef%bc%8c%e5%83%8f%e4%b8%80%e5%9c%ba%e7%94%b5%e5%bd%b1.mp4&amp;mp4&#34;&gt;
&lt;/iframe&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;FLV&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;iframe class=&#34;videoiframe&#34; width= &#39;100%&#39; height=&#39;400&#39; scrolling=&#34;no&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34; 
    src=&#34;https://alist.liulp.club/video/?%e5%86%b0%e5%86%b0-%e6%88%91%e7%9a%84%e8%a1%8c%e6%9d%8e%e7%ae%b1.flv&amp;flv&#34;&gt;
&lt;/iframe&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HLS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;iframe class=&#34;videoiframe&#34; width= &#39;100%&#39; height=&#39;400&#39; scrolling=&#34;no&#34; frameborder=&#34;no&#34; framespacing=&#34;0&#34; allowfullscreen=&#34;true&#34; 
    src=&#34;https://alist.liulp.club/video/?%e9%bb%91%e7%a5%9e%e8%af%9d%e6%82%9f%e7%a9%ba&amp;m3u8&#34;&gt;
&lt;/iframe&gt;&lt;/p&gt;
&lt;h3 id=&#34;代码-1&#34;&gt;代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&amp;lt;&lt;span style=&#34;color:#a6e22e&#34;&gt;video&lt;/span&gt;
   &lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;video-js vjs-big-play-centered vjs-fluid&amp;#34;&lt;/span&gt;
   &lt;span style=&#34;color:#a6e22e&#34;&gt;controls&lt;/span&gt;
   &lt;span style=&#34;color:#a6e22e&#34;&gt;preload&lt;/span&gt;=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;auto&amp;#34;&lt;/span&gt;
   &lt;span style=&#34;color:#a6e22e&#34;&gt;poster&lt;/span&gt;=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://cdn.jsdelivr.net/gh/CS123n/source@master/image/UwOm5D.jpg&amp;#34;&lt;/span&gt;
   &lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;setup&lt;/span&gt;=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;{}&amp;#34;&lt;/span&gt; &amp;gt;
   &amp;lt;&lt;span style=&#34;color:#a6e22e&#34;&gt;source&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;={{.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; }} &lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt;=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;video/mp4&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&amp;gt;
   {{ &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; .&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; }}&amp;lt;&lt;span style=&#34;color:#a6e22e&#34;&gt;track&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;={{.&lt;span style=&#34;color:#a6e22e&#34;&gt;Get&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; }} &lt;span style=&#34;color:#a6e22e&#34;&gt;srclang&lt;/span&gt;=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;By Mydrive&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;kind&lt;/span&gt;=&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;subtitles&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;&amp;gt;
   {{ &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; }}{{&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt;}}
&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;video&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;pdf效果&#34;&gt;PDF效果&lt;/h2&gt;
&lt;iframe class=&#34;pdfiframe&#34; width=&#34;100%&#34; height=&#34;100%&#34; frameborder=&#34;0&#34;
    src=&#34;https://alist.liulp.club/pdf/web/viewer.html?file=https://alist.liulp.club/d/Alidrive/Website/document/Terence_Tao_Analysis_I.pdf&#34; &gt;
&lt;/iframe&gt;
&lt;h3 id=&#34;代码-2&#34;&gt;代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pdfiframe&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;width&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100%&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;height&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;100%&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;frameborder&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://www.liulp.club/pdf/web/viewer.html?file=https://cdn.jsdelivr.net/gh/CS123n/source@master/document/{{.Get 0 }}.pdf&amp;#34;&lt;/span&gt; &amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;iframe&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;问卷效果&#34;&gt;问卷效果&lt;/h2&gt;
&lt;script type=&#39;text/javascript&#39; src=&#39;https://www.wjx.cn/handler/jqemed.ashx?activity=84948988&amp;width=700&amp;source=iframe&#39;&gt;&lt;/script&gt;
&lt;h3 id=&#34;代码-3&#34;&gt;代码&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&amp;lt;&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;type&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;text/javascript&amp;#39;&lt;/span&gt; 
    &lt;span style=&#34;color:#a6e22e&#34;&gt;src&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://www.wjx.cn/handler/jqemed.ashx?activity={{.Get 0 }}&amp;amp;width=700&amp;amp;source=iframe&amp;#39;&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span style=&#34;color:#f92672&#34;&gt;script&lt;/span&gt;&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
  <pubDate>Sat, 11 Jul 2020 08:44:41 +0800</pubDate>
  
  <guid>https://www.liulp.club/2020/07/hugo/</guid>
</item>

<item>
  <title>OneIndex</title>
  <link>https://www.liulp.club/2020/07/oneindex/</link>
    <description>&lt;p&gt;个人oneindex网盘搭建过程&lt;/p&gt;
&lt;h2 id=&#34;技术网站&#34;&gt;技术网站&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/LiuChangFreeman/OneIndex-Serverless&#34;&gt;开源程序oneindex&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/qkqpttgf/OneManager-php&#34;&gt;开源程序oneManager&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/74538287&#34;&gt;教程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;成果&#34;&gt;成果&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://drive.liulp.club/&#34;&gt;我的oneManager&lt;/a&gt;&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://liuluping0106.github.io/oneindex/#/?path=&#34;&gt;我的oneindex&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;ssl证书有效期至2021.07.18 &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;</description>
  <pubDate>Fri, 10 Jul 2020 10:43:20 +0800</pubDate>
  
  <guid>https://www.liulp.club/2020/07/oneindex/</guid>
</item>

<item>
  <title>网站搭建记录</title>
  <link>https://www.liulp.club/2020/07/build_web/</link>
    <description>&lt;p&gt;搭建网站需要的技术记录&lt;/p&gt;
&lt;h2 id=&#34;资源站点&#34;&gt;资源站点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;del&gt;&lt;a href=&#34;https://sbimg.cn/&#34;&gt;公益图床&lt;/a&gt;&lt;/del&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://imgchr.com/liuyouyou&#34;&gt;路过图床&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://pngimg.com/&#34;&gt;抠图素材&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.pexels.com/zh-cn/&#34;&gt;Pexels图片&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://pixabay.com/zh/illustrations/&#34;&gt;Pixabay插画&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://unsplash.com/&#34;&gt;Upslpash图片&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.iconfont.cn/&#34;&gt;阿里矢量图&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;技术博客&#34;&gt;技术博客&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jianshu.com/p/68da4f350d97&#34;&gt;Hugo for windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/liuweixiao520/article/details/78971221&#34;&gt;git推送设置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cungudafa.top/post/3af9.html&#34;&gt;今日诗词&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/yelllowcong/article/details/77663442&#34;&gt;git关闭右键菜单&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.feiniaomy.com/post/456.html&#34;&gt;添加网站运行天数&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/zhixingwu/article/details/104393647&#34;&gt;FA5使用方法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/qq_36759224/article/details/98058240&#34;&gt;jsDelivr图床&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zhuanlan.zhihu.com/p/137795279&#34;&gt;jsDelivr使用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.csdn.net/weixin_33813128/article/details/88588655&#34;&gt;百度SEO&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://knightyun.github.io/2019/03/04/articles-search&#34;&gt;站内搜索&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;官方网站&#34;&gt;官方网站&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gohugo.io/&#34;&gt;Hugo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jinrishici.com/&#34;&gt;今日诗词&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://fa5.dashgame.com/#/&#34;&gt;Fontawesome&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://busuanzi.ibruce.info/&#34;&gt;不蒜子&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tinypng.com/&#34;&gt;熊猫压缩&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.staticfile.org/&#34;&gt;staticfile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jsdelivr.com/&#34;&gt;jsdelivr&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;常用特殊符号&#34;&gt;常用特殊符号&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;常用排版 : ▌▍◆★☆☁➤➜❤➊➋➌&lt;/li&gt;
&lt;li&gt;TodoList : ✅☑✓✔√☓☒✘ㄨ✕✖✗❌❎&lt;/li&gt;
&lt;li&gt;emoji : 🌹🍀🌙🍂🍃🌷💎🔥⭐🍄🏆&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;计划完善&#34;&gt;计划完善&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;看板娘&lt;/li&gt;
&lt;li&gt;动态背景&lt;/li&gt;
&lt;li&gt;伸缩式目录&lt;/li&gt;
&lt;/ul&gt;</description>
  <pubDate>Thu, 09 Jul 2020 12:54:26 +0800</pubDate>
  
  <guid>https://www.liulp.club/2020/07/build_web/</guid>
</item>

</channel>
</rss>